# ===================================================================
# TVBOOT IPTV Platform - Development Profile Overrides
# ===================================================================

spring:
  # ==========================================
  # DATABASE CONFIGURATION (DEV)
  # ==========================================
  datasource:
    url: jdbc:postgresql://localhost:5432/tvboot_db?createDatabaseIfNotExist=true&useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=UTC&useUnicode=true&characterEncoding=UTF-8&autoReconnect=true&failOverReadOnly=false&maxReconnects=3&initialTimeout=2
    hikari:
      pool-name: TvbootHikariPoolDev
      minimum-idle: 3
      leak-detection-threshold: 60000
      auto-commit: false
      transaction-isolation: TRANSACTION_READ_COMMITTED
      connection-test-query: SELECT 1
      validation-timeout: 5000
      register-mbeans: true
      data-source-properties:
        cachePrepStmts: true
        prepStmtCacheSize: 250
        prepStmtCacheSqlLimit: 2048
        useServerPrepStmts: true
        rewriteBatchedStatements: true
        cacheResultSetMetadata: true
        cacheServerConfiguration: true
        elideSetAutoCommits: true
        maintainTimeStats: false
        useInformationSchema: true

  # ==========================================
  # JPA & HIBERNATE CONFIGURATION (DEV)
  # ==========================================
  jpa:
    database-platform: org.hibernate.dialect.MySQLDialect
    properties:
      hibernate:
        connection.autocommit: false
        connection.provider_disables_autocommit: true
        transaction.coordinator_class: jdbc
        resource.transaction.backend: jdbc
        jdbc.batch_size: 20
        order_inserts: true
        order_updates: true
        generate_statistics: true
        session.events.log.LOG_QUERIES_SLOWER_THAN_MS: 100

  # ==========================================
  # FLYWAY CONFIGURATION (DEV)
  # ==========================================
  flyway:
    encoding: UTF-8
    connect-retries: 3

# ==========================================
# LOGGING CONFIGURATION (DEV)
# ==========================================
logging:
  level:
    com.tvboot.tivio.config: DEBUG
    com.tvboot.tivio.security: DEBUG
    com.tvboot.tivio.controller: DEBUG
    com.tvboot.tivio.service: DEBUG
    com.tvboot.tivio.audit: INFO
    com.zaxxer.hikari: INFO
    com.zaxxer.hikari.HikariConfig: DEBUG
    com.zaxxer.hikari.pool: DEBUG
    org.springframework.transaction: DEBUG
    org.springframework.orm.jpa: DEBUG
    org.flywaydb: DEBUG
  file:
    path: logs
    name: logs/tvboot-dev.log
  logback:
    rollingpolicy:
      max-file-size: 100MB
      max-history: 7
      total-size-cap: 1GB

# ==========================================
# APP CUSTOM CONFIGURATION (DEV)
# ==========================================
app:
  jwtSecret: ${JWT_SECRET:tvbootDevSecretKey2024SuperSecureKeyForJWTTokenGenerationDevelopment!@#$%^&*()}

# ==========================================
# SERVER CONFIGURATION (DEV)
# ==========================================
server:
  error:
    include-stacktrace: always

# ==========================================
# ACTUATOR CONFIGURATION (DEV)
# ==========================================
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,env,configprops,beans,flyway,hikaricp
  security:
    enabled: false
